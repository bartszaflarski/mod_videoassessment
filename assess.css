/* This file is part of Moodle - http://moodle.org/
//
// Moodle is free software: you can redistribute it and/or modify
// it under the terms of the GNU General Public License as published by
// the Free Software Foundation, either version 3 of the License, or
// (at your option) any later version.
//
// Moodle is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU General Public License for more details.
//
// You should have received a copy of the GNU General Public License
// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.

/**
 * Video assessment
 *
 * @package    mod_videoassessment
 * @copyright  2024 Don Hinkleman (hinkelman@mac.com)
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */

 @charset "UTF-8";

 .gradingform_rubric { padding-bottom:0; overflow:inherit; }
 .gradingform_rubric table { margin-bottom:0; }
 #fitem_id_advancedgradingafter { margin-top:1.5em; }
 
 #fitem_id_advancedgradingbefore,
 #fitem_id_advancedgradingafter {
     overflow-x:auto;
 }
 .path-mod-videoassessment #fitem_id_advancedgradingbefore .felement,
 .path-mod-videoassessment #fitem_id_advancedgradingafter .felement,
 .path-mod-videoassessment .gradingform_rubric .criteria {
     width:100%;
 }
 .path-mod-videoassessment .gradingform_rubric .criteria .definition {
     word-break:break-all !important;
 }
 
 #page-content { overflow:inherit; }
 #page-content #region-main { overflow:visible; }
 #page-content:before, #page-content:after {content:""; display:table;}
 #page-content:after {clear:both;}
 #page-content {zoom:1;}
 #region-main-box:before, #region-main-box:after {content:""; display:table;}
 #region-main-box:after {clear:both;}
 #region-main-box {zoom:1;}
 #region-post-box:before, #region-post-box:after {content:""; display:table;}
 #region-post-box:after {clear:both;}
 #region-post-box {zoom:1;}
 
 #page-content{
   float:none !important;
   display:block;
   width:auto !important;
 }
 #page-content #region-main-box{
   position:static !important;
   display:block;
   float:none !important;
   width:100% !important;
 }
 #page-content #region-post-box{
   float:none !important;
   position:static !important;
 }
 #page-content #region-main-wrap{
   float:none !important;
   width:auto !important;
   display:block !important;
   right:0 !important;
 }
 .path-mod-videoassessment .gradingform{
   float: left;
   margin-left: 0px !important;
   min-height: 660px;
 }
 .path-mod-videoassessment .assess-form-videos{
     float: left;
     margin: 10px 2.9761% 0 0;
     width: 23.8095%;
 }
 .path-mod-videoassessment .assess-form-videos object {
     width: 100%!important;
     display: block;
 }
 .path-mod-videoassessment form.gradingform {
      width: 73.2144%;
 }
 .side-pre-only #page-content #region-post-box{
   margin-left:0 !important;
 }
 .side-pre-only #page-content #region-main {
   margin-left: 0 !important;
 }
 .side-pre-only #page-content #region-pre{
   display:none;
 }
 .opera #page-footer, .safari #page-footer, .gecko #page-footer{
   padding-left:0 !important;
   position: relative;
   margin-top: -10px;
 }
 
 .gradingform .ftoggler {
     padding-bottom: 15px;
 }
 
 .gradingform .ftoggler .fheader {
     font-size: 28px;
     line-height: 100px;
 }
 
 .gradingform .ftoggler a:not(.fheader) {
     display: block;
     float: right;
 }
 
 .gradingform .ftoggler a:not(.fheader) img {
     width: auto;
     height: auto;
     vertical-align: middle;
 }
 
 .assess-form-videos .mediaplugin.mediaplugin_flv {
     margin: 0;
 }
 
 #page-mod-videoassessment-view.assess-page #page.container-fluid {
     max-width: none;
 }
 
 #page-mod-videoassessment-view.assess-page.path-mod-videoassessment #page.container-fluid .gradingform_rubric {
     width: 100%;
     max-width: none;
 }
 
 .remark {
     text-align: center;
 }
 
 /* Comment label - hidden by default */
 .remark-comment-label {
     display: none;
 }
 
 .remark textarea[cols] {
     width: 90%;
 }
 
 #training-result-wrap {
     float: left;
     width: 73.2144%;
     margin-bottom: 30px;
 }
 
 #training-result-wrap table, .rubric-result table {
     width: 100%;
 }
 
 #training-result-wrap table td, .rubric-result td {
     border: 1px solid #ddd;
     vertical-align: top;
     padding: 5px;
 }
 
 #training-result-wrap .status, .rubric-result .status {
     text-align: center;
     vertical-align: middle!important;
 }
 
 #training-result-wrap .score, .rubric-result .score {
     color: #575;
     font-style: italic;
     font-weight: bold;
     margin-top: 5px;
 }
 
 #training-result-wrap .score-selected-wrap, .rubric-result .score-selected-wrap {
     margin-top: 5px;
 }
 
 #training-result-wrap .teacher-selected, .rubric-result .teacher-selected {
     color: #40aa55;
 }
 
 #training-result-wrap .student-selected, .rubric-result .student-selected {
     color: #ff0000;
 }
 
 #training-result-wrap .score-selected, .rubric-result .score-selected {
     font-weight: bold;
     margin-right: 5px;
 }
 
 #training-result-wrap .result-notice {
     margin-top: 10px;
 }
 
 .button-notice {
     color: #333;
     text-decoration: none!important;
     display: inline-block;
     background-color: #e6e6e6;
     padding: 4px 12px;
     border-radius: 4px;
     border: 1px solid #ccc;
     background-image: linear-gradient(top,#fff,#e6e6e6);
     background-image: -webkit-linear-gradient(top,#fff,#e6e6e6);
     background-image: -moz-linear-gradient(top,#fff,#e6e6e6);
     background-image: -o-linear-gradient(top,#fff,#e6e6e6);
 }
 
 #training-result-table > tbody > tr.even {
     background: #f0f0f0;
 }
 
 #training-result-table table, .rubric-result table {
     border-collapse: separate;
 }
 
 #training-result-table .criterion-passed .teacher-td, .rubric-result .criterion-passed .teacher-td {
     background: rgba(163, 214, 173, 0.5);
     border: 1px solid #000!important;
 }
 
 #training-result-table .student-td, .rubric-result .student-td, .student-history-td {
     background: rgba(238, 121, 121, 0.5)!important;
     border: 1px solid #000!important;
 }
 
 #training-result-table .criterion-failed .teacher-selected, .rubric-result .criterion-failed .teacher-selected {
     display: none;
 }
 
 #fitem_id_advancedgradingbefore > .fitemtitle {
     overflow: hidden;
     float: none;
 }
 
 #fitem_id_advancedgradingbefore > .felement.error > span.error {
     display: none;
 }
 
 #fitem_id_advancedgradingbefore > .felement.error > br {
     display: none;
 }
 
 #fitem_id_advancedgradingbefore > .felement.error > .gradingform_rubric-error {
     display: inline;
 }
 
 #training-result-table-render {
     display: none;
 }
 
 /* Mobile responsive rubric - convert table columns to rows */
 @media (max-width: 768px) and (orientation: portrait) {
     /* Make the rubric container full width */
     .path-mod-videoassessment .gradingform_rubric,
     .gradingform_rubric {
         width: 100%;
         overflow-x: visible;
     }
 
     .path-mod-videoassessment form.gradingform,
     form.gradingform {
         width: 100%;
         float: none;
     }
 
    .path-mod-videoassessment .assess-form-videos,
    .assess-form-videos {
        float: none;
        width: 100%;
        margin: 0 0 20px 0;
        height: 25vh;
        z-index: 999;
        position: sticky;
        top: 0;
    }
     
     .path-mod-videoassessment .assess-form-videos .video-wrap,
     .assess-form-videos .video-wrap {
         width: 100%;
         height: 100%;
     }
     
     .path-mod-videoassessment .assess-form-videos video,
     .assess-form-videos video,
     .path-mod-videoassessment .assess-form-videos object,
     .assess-form-videos object,
     .path-mod-videoassessment .assess-form-videos iframe,
     .assess-form-videos iframe,
     .path-mod-videoassessment .assess-form-videos embed,
     .assess-form-videos embed,
     .path-mod-videoassessment .assess-form-videos .mediaplugin,
     .assess-form-videos .mediaplugin {
         width: 100%;
     }
 
     .path-mod-videoassessment .gradingform,
     .gradingform {
         float: none;
         margin-left: 0;
         min-height: auto;
     }
 
     /* Convert main rubric table to block layout */
     .gradingform_rubric table.criteria,
     .gradingform_rubric .criteria,
     table.criteria {
         display: block;
         width: 100%;
     }
 
     .gradingform_rubric table.criteria > tbody,
     .gradingform_rubric .criteria > tbody,
     table.criteria > tbody {
         display: block;
     }
 
     /* Each criterion row becomes a card */
     .gradingform_rubric table.criteria > tbody > tr.criterion,
     .gradingform_rubric .criteria > tbody > tr.criterion,
     .gradingform_rubric tr.criterion,
     tr.criterion {
         display: block;
         margin-bottom: 20px;
         border: none;
         border-radius: 8px;
         overflow: hidden;
         background: #fff;
         box-shadow: 0 2px 4px rgba(0,0,0,0.1);
     }
 
     /* Criterion description cell becomes header */
     .gradingform_rubric tr.criterion > td.description,
     .gradingform_rubric .criterion .description,
     tr.criterion > td.description,
     td.description {
         display: block;
         width: 100%;
         background: #343a40;
         color: #fff;
         padding: 12px 15px;
         font-weight: bold;
         font-size: 16px;
         border: none;
         box-sizing: border-box;
     }
 
     /* The levels cell container - convert to block */
     .gradingform_rubric tr.criterion > td.levels,
     tr.criterion > td.levels,
     td.levels {
         display: block;
         width: 100%;
         padding: 0;
         border: none;
     }
 
     /* The nested levels table - convert to block */
     .gradingform_rubric tr.criterion td.levels table,
     .gradingform_rubric .criterion .levels table,
     tr.criterion td.levels table,
     td.levels table {
         display: block;
         width: 100%;
         border: none;
     }
 
     .gradingform_rubric tr.criterion td.levels table tbody,
     tr.criterion td.levels table tbody,
     td.levels table tbody {
         display: block;
         width: 100%;
     }
 
     /* The row containing all levels - make it flex column so td children stack */
     .gradingform_rubric tr.criterion td.levels table tr,
     tr.criterion td.levels table tr,
     td.levels table tr,
     td.levels > table > tbody > tr {
         display: flex;
         flex-direction: column;
         width: 100%;
         border: none;
     }
 
     /* Each level cell becomes a full-width row */
     .gradingform_rubric tr.criterion td.levels table td.level,
     .gradingform_rubric td.level,
     tr.criterion td.levels table td.level,
     td.levels table td.level,
     td.level,
     td.levels > table > tbody > tr > td.level,
     .gradingform_rubric td.levels > table > tbody > tr > td {
         display: flex;
         flex-wrap: wrap;
         flex-direction: column;
         align-items: center;
         justify-content: center;
         width: 100%;
         max-width: 100%;
         min-width: 100%;
         padding: 15px;
         border: none;
         border-bottom: 1px solid #e9ecef;
         box-sizing: border-box;
         min-height: auto;
         cursor: pointer;
         text-align: center;
     }
 
     td.level:last-of-type,
     .gradingform_rubric td.level:last-of-type {
         border-bottom: none;
     }
 
     /* Score badge styling - show first/prominently */
     .gradingform_rubric td.level .score,
     td.level .score,
     td.level .score.d-inline {
         order: -1;
         display: inline-flex;
         align-items: center;
         justify-content: center;
         background: #6c757d;
         color: #fff;
         padding: 8px 16px;
         border-radius: 20px;
         font-size: 14px;
         font-weight: bold;
         margin: 5px auto 8px auto;
         min-width: 80px;
         flex-shrink: 0;
         width: auto;
         max-width: 150px;
     }
 
     /* Level definition text */
     .gradingform_rubric td.level .definition,
     td.level .definition {
         width: 100%;
         word-break: normal;
         font-size: 14px;
         line-height: 1.5;
         margin: 0;
         text-align: center;
         order: 1;
     }
 
     /* Level wrapper inside each level */
     .gradingform_rubric td.level .level-wrapper,
     td.level .level-wrapper {
         display: flex;
         flex-direction: column;
         align-items: center;
         width: 100%;
     }
 
     /* Hide the radio button visually but keep it functional */
     .gradingform_rubric td.level .radio,
     td.level .radio {
         position: absolute;
         opacity: 0;
         width: 1px;
         height: 1px;
         overflow: hidden;
     }
 
     /* Selected/checked level styling */
     .gradingform_rubric td.level.checked,
     .gradingform_rubric td.level.currentchecked,
     td.level.checked,
     td.level.currentchecked,
     .gradingform_rubric .criterion .level.checked {
         background: #d0ffd0;
         border-left: 5px solid #28a745;
         padding-left: 10px;
     }
 
     .gradingform_rubric td.level.checked .score,
     .gradingform_rubric td.level.currentchecked .score,
     td.level.checked .score,
     td.level.currentchecked .score {
         background: #28a745;
     }
 
     /* Hover state for levels */
     .gradingform_rubric td.level:hover,
     td.level:hover {
         background: #f8f9fa;
     }
 
     .gradingform_rubric td.level.checked:hover,
     .gradingform_rubric td.level.currentchecked:hover,
     td.level.checked:hover,
     td.level.currentchecked:hover,
     .gradingform_rubric .criterion .level.checked:hover {
         background: #d0ffd0;
     }
 
     /* Hide the radio indicator since we have the score badge */
     .gradingform_rubric td.level::before,
     td.level::before {
         display: none;
     }
 
     /* Remark/comment cell */
     .gradingform_rubric tr.criterion > td.remark,
     .gradingform_rubric .criterion .remark,
     tr.criterion > td.remark,
     td.remark {
         display: block;
         width: 100%;
         padding: 15px;
         background: #f8f9fa;
         box-sizing: border-box;
         border: none;
     }
 
 
     .gradingform_rubric .remark textarea,
     td.remark textarea {
         width: 100%;
         min-height: 80px;
         box-sizing: border-box;
         border: 1px solid #ced4da;
         border-radius: 4px;
         padding: 10px;
     }
 
     /* Comment label - show on mobile only */
     .remark-comment-label {
         display: block;
         font-weight: bold;
         margin-bottom: 8px;
     }
 
     /* Hide table header on mobile if present */
     .gradingform_rubric table.criteria > thead,
     .gradingform_rubric .criteria > thead,
     table.criteria > thead {
         display: none;
     }
 
     /* Adjust video preview area */
     #training-result-wrap {
         float: none;
         width: 100%;
     }
 
     /* Fix form item widths */
     #fitem_id_advancedgradingbefore,
     #fitem_id_advancedgradingafter {
         overflow-x: visible;
     }
 
     #fitem_id_advancedgradingbefore .felement,
     #fitem_id_advancedgradingafter .felement {
         width: 100%;
         overflow-x: visible;
     }
 
     /* Clearfix container */
     .clearfix.gradingform_rubric {
         display: block;
     }
 
     /* Error message styling */
     .gradingform_rubric-error {
         color: red;
         font-weight: 700;
         position: fixed;
         z-index: 9999;
         background: white;
         bottom: 10px;
         padding: 10px;
     }
 }