{"version":3,"file":"ajaxcalls.min.js","sources":["../src/ajaxcalls.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Video assessment\n *\n * @package\n * @copyright  2024 Don Hinkleman (hinkelman@mac.com)\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery', 'core/notification', 'core/ajax', 'core/modal_factory'],\n    function ($, notification, ajax, ModalFactory) {\n\n        /**\n        * Ajaxcall class to handle async operations in videoassessment.\n        * @class\n        */\n        function Ajaxcall() {\n            this.value = \"ajax ok\";\n        }\n\n        Ajaxcall.prototype.getGetallcomments = function (action, userid, timing, cmid, id) {\n            var promises = ajax.call([{\n                methodname: 'mod_videoassessment_get_getallcomments',\n                args: { ajax: 1, action: action, userid: userid, timing: timing, cmid: cmid, id: id },\n                fail: notification.exception\n            }]);\n            promises[0].then(function (data) {\n                let res = $.parseJSON(data.html);\n                if (res) {\n                    $.when(ModalFactory.create({\n                        type: ModalFactory.types.CANCEL,\n                        title: `<h1>${M.str.videoassessment.generalcomments}</h1>`,\n                        body: res,\n                    })).then(function (modal) {\n                        modal.show();\n                        return false;\n                    }).catch(notification.exception);\n                }\n            });\n        };\n        Ajaxcall.prototype.getcoursesbycategory = function (action, catid, currentcourseid) {\n            var promises = ajax.call([{\n                methodname: 'mod_videoassessment_get_coursesbycategory',\n                args: { ajax: 1, action: action, catid: catid, currentcourseid: currentcourseid },\n                fail: notification.exception\n            }]);\n            promises[0].then(function (data) {\n                if (data.html) {\n                    $('#publish-course').html(data.html);\n                    $('#publish-course').trigger('change');\n                }\n            });\n        };\n\n        Ajaxcall.prototype.getsectionsbycourse = function (action, courseid, currentsectionid) {\n            var promises = ajax.call([{\n                methodname: 'mod_videoassessment_get_sectionsbycourse',\n                args: { ajax: 1, action: action, courseid: courseid, currentsectionid: currentsectionid },\n                fail: notification.exception\n            }]);\n            promises[0].then(function (data) {\n                if (data.html) {\n                    $('#publish-section').html(data.html);\n                    $('#publish-section').removeAttr('disabled');\n                } else {\n                    $('#publish-section').attr('disabled', 'disabled');\n                }\n            });\n        };\n\n        Ajaxcall.prototype.assignclasssortgroup = function (action, sort, groupid, id) {\n            var promises = ajax.call([{\n                methodname: 'mod_videoassessment_assignclass_sort_group',\n                args: { action: action, sort: sort, groupid: groupid, id: id },\n                fail: notification.exception\n            }]);\n            promises[0].then(function (data) {\n                if (sort == 3) {\n                    $('#sortby').data('load', 1);\n                }\n                $('#separate-group').after(data.html);\n                $('#separate-group').parent().find('.loading-icon').remove();\n            });\n        };\n\n        return Ajaxcall;\n    });"],"names":["define","$","notification","ajax","ModalFactory","Ajaxcall","value","prototype","getGetallcomments","action","userid","timing","cmid","id","call","methodname","args","fail","exception","then","data","res","parseJSON","html","when","create","type","types","CANCEL","title","M","str","videoassessment","generalcomments","body","modal","show","catch","getcoursesbycategory","catid","currentcourseid","trigger","getsectionsbycourse","courseid","currentsectionid","removeAttr","attr","assignclasssortgroup","sort","groupid","after","parent","find","remove"],"mappings":";;;;;;;AAsBAA,uCAAO,CAAC,SAAU,oBAAqB,YAAa,uBAChD,SAAUC,EAAGC,aAAcC,KAAMC,uBAMpBC,gBACAC,MAAQ,iBAGjBD,SAASE,UAAUC,kBAAoB,SAAUC,OAAQC,OAAQC,OAAQC,KAAMC,IAC5DV,KAAKW,KAAK,CAAC,CACtBC,WAAY,yCACZC,KAAM,CAAEb,KAAM,EAAGM,OAAQA,OAAQC,OAAQA,OAAQC,OAAQA,OAAQC,KAAMA,KAAMC,GAAIA,IACjFI,KAAMf,aAAagB,aAEd,GAAGC,MAAK,SAAUC,UACnBC,IAAMpB,EAAEqB,UAAUF,KAAKG,MACvBF,KACApB,EAAEuB,KAAKpB,aAAaqB,OAAO,CACvBC,KAAMtB,aAAauB,MAAMC,OACzBC,oBAAcC,EAAEC,IAAIC,gBAAgBC,yBACpCC,KAAMb,OACNF,MAAK,SAAUgB,cACfA,MAAMC,QACC,KACRC,MAAMnC,aAAagB,eAIlCb,SAASE,UAAU+B,qBAAuB,SAAU7B,OAAQ8B,MAAOC,iBAChDrC,KAAKW,KAAK,CAAC,CACtBC,WAAY,4CACZC,KAAM,CAAEb,KAAM,EAAGM,OAAQA,OAAQ8B,MAAOA,MAAOC,gBAAiBA,iBAChEvB,KAAMf,aAAagB,aAEd,GAAGC,MAAK,SAAUC,MACnBA,KAAKG,OACLtB,EAAE,mBAAmBsB,KAAKH,KAAKG,MAC/BtB,EAAE,mBAAmBwC,QAAQ,eAKzCpC,SAASE,UAAUmC,oBAAsB,SAAUjC,OAAQkC,SAAUC,kBAClDzC,KAAKW,KAAK,CAAC,CACtBC,WAAY,2CACZC,KAAM,CAAEb,KAAM,EAAGM,OAAQA,OAAQkC,SAAUA,SAAUC,iBAAkBA,kBACvE3B,KAAMf,aAAagB,aAEd,GAAGC,MAAK,SAAUC,MACnBA,KAAKG,MACLtB,EAAE,oBAAoBsB,KAAKH,KAAKG,MAChCtB,EAAE,oBAAoB4C,WAAW,aAEjC5C,EAAE,oBAAoB6C,KAAK,WAAY,gBAKnDzC,SAASE,UAAUwC,qBAAuB,SAAUtC,OAAQuC,KAAMC,QAASpC,IACxDV,KAAKW,KAAK,CAAC,CACtBC,WAAY,6CACZC,KAAM,CAAEP,OAAQA,OAAQuC,KAAMA,KAAMC,QAASA,QAASpC,GAAIA,IAC1DI,KAAMf,aAAagB,aAEd,GAAGC,MAAK,SAAUC,MACX,GAAR4B,MACA/C,EAAE,WAAWmB,KAAK,OAAQ,GAE9BnB,EAAE,mBAAmBiD,MAAM9B,KAAKG,MAChCtB,EAAE,mBAAmBkD,SAASC,KAAK,iBAAiBC,aAIrDhD"}