{"version":3,"file":"utils.min.js","sources":["../src/utils.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Video assessment\n *\n * @module mod_videoassessment/utils\n * @package\n * @copyright  2024 Don Hinkleman (hinkelman@mac.com)\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine([], function () {\n    return {\n\n        /**\n         * Generates a secure random string.\n         * @returns {string}\n         */\n        getRandomString() {\n            if (window.crypto && window.crypto.getRandomValues) {\n                const array = window.crypto.getRandomValues(new Uint32Array(3));\n                return Array.from(array).map(v => v.toString(36)).join('');\n            }\n            return (Math.random() * Date.now()).toString(36);\n        },\n\n        /**\n         * Generates a unique filename.\n         * @param {string} extension\n         * @returns {string}\n         */\n        getFileName(extension = 'webm') {\n            const now = new Date();\n            const prefix = `RecordRTC-${now.getUTCFullYear()}${now.getUTCMonth()}${now.getUTCDate()}`;\n            return `${prefix}-${this.getRandomString()}.${extension}`;\n        },\n\n        /**\n         * Converts an object to a string.\n         * @param {Object} obj\n         * @returns {string}\n         */\n        stringify(obj) {\n            return Object.entries(obj)\n                .filter(entry => typeof entry[1] !== 'function')\n                .map(([key, value]) => `${key}: ${value}`)\n                .join(', ');\n        }\n    };\n});\n"],"names":["define","getRandomString","window","crypto","getRandomValues","array","Uint32Array","Array","from","map","v","toString","join","Math","random","Date","now","getFileName","extension","prefix","getUTCFullYear","getUTCMonth","getUTCDate","this","stringify","obj","Object","entries","filter","entry","_ref","key","value"],"mappings":";;;;;;;;AAuBAA,mCAAO,IAAI,iBACA,CAMHC,qBACQC,OAAOC,QAAUD,OAAOC,OAAOC,gBAAiB,OAC1CC,MAAQH,OAAOC,OAAOC,gBAAgB,IAAIE,YAAY,WACrDC,MAAMC,KAAKH,OAAOI,KAAIC,GAAKA,EAAEC,SAAS,MAAKC,KAAK,WAEnDC,KAAKC,SAAWC,KAAKC,OAAOL,SAAS,KAQjDM,kBAAYC,iEAAY,aACdF,IAAM,IAAID,KACVI,2BAAsBH,IAAII,yBAAmBJ,IAAIK,sBAAgBL,IAAIM,8BACjEH,mBAAUI,KAAKtB,8BAAqBiB,YAQlDM,UAAUC,KACCC,OAAOC,QAAQF,KACjBG,QAAOC,OAA6B,mBAAbA,MAAM,KAC7BpB,KAAIqB,WAAEC,IAAKC,4BAAcD,iBAAQC,UACjCpB,KAAK"}