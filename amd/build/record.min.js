/**
 * Video assessment
 *
 * @package
 * @module     mod_videoassessment/record
 * @copyright  2024 Don Hinkleman (hinkelman@mac.com)
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("mod_videoassessment/record",["mod_videoassessment/media","mod_videoassessment/uploader"],(function(media,uploader){return{reCord:function(){const btnStart=document.querySelector("#btn-start-recording"),btnPause=document.querySelector("#btn-pause-recording");let recorder,stream;btnStart.addEventListener("click",(function(){recorder&&"recording"===recorder.getState()?recorder.stopRecording((()=>{const blob=recorder.getBlob();uploader.upload(blob,recorder.mimeType)})):media.captureUserMedia((userStream=>{stream=userStream,recorder=new RecordRTC(stream,{type:"video",mimeType:"video/webm",disableLogs:!1}),recorder.startRecording(),btnPause.style.display="",btnStart.textContent=M.str.videoassessment.stoprecording}),(err=>{alert(M.str.videoassessment.errorcapturingmedia+" "+err.message)}))})),btnPause.addEventListener("click",(function(){recorder&&(btnPause.textContent===M.str.videoassessment.pause?(recorder.pauseRecording(),btnPause.textContent=M.str.videoassessment.resumerecording):(recorder.resumeRecording(),btnPause.textContent=M.str.videoassessment.pause))}))}}}));

//# sourceMappingURL=record.min.js.map