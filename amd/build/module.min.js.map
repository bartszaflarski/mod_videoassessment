{"version":3,"file":"module.min.js","sources":["../src/module.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Video assessment\n *\n * @package\n * @copyright  2024 Don Hinkleman (hinkelman@mac.com)\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n// Define the module using AMD.\ndefine(['jquery', 'core/log', 'jqueryui'], function ($, log) {\n\n    const videoassessment = {\n\n        mainInit(cmid) {\n            this.cmid = cmid;\n            this.initVideoPreview();\n        },\n\n        videosInit(users, assocs) {\n            this.users = users;\n            this.assocs = assocs;\n            this.initVideoPreview();\n\n            $('#assocpanel').dialog({\n                autoOpen: false,\n                width: 450,\n                height: 420\n            }).draggable({ handle: \".ui-dialog-titlebar\" });\n\n            $('.videodel').on('click', (e) => {\n                if (!confirm(M.str.videoassessment.reallydeletevideo)) {\n                    e.preventDefault();\n                }\n            });\n        },\n\n        peersInit() {\n        },\n\n        peersConfirmRandom() {\n            return confirm(M.str.videoassessment.reallyresetallpeers);\n        },\n\n        assessInit() {\n        },\n\n        initVideoLinks() {\n            $('.videolink').on('click', (e) => {\n                e.preventDefault();\n                const videoId = $(e.target).data('videoid') || $(e.target).parent().data('videoid');\n                if (videoId) {\n                    this.initVideoPreview(videoId);\n                } else {\n                    log.debug('Video ID not found');\n                }\n            });\n        },\n\n        initVideoPreview() {\n            $('#videopreview').dialog({\n                autoOpen: false,\n                modal: true,\n                width: 480,\n                height: 420,\n                close: () => $('#videopreview').html('')\n            });\n\n            $('#videopreviewnotice').dialog({\n                autoOpen: false,\n                modal: true,\n                width: 450,\n                height: 150\n            });\n        },\n\n        videosUpdateAssocCell($div) {\n            let html = '<select size=\"4\"></select><select>';\n            for (const user of this.users) {\n                html += `<option>${user.fullname}</option>`;\n            }\n            html += '</select>';\n            $div.html(html);\n        },\n\n        videosShowVideoPreview(videoId) {\n            const src = `videopreview.php?id=${this.cmid}&videoid=${videoId}&width=400&height=300`;\n            const html = `<iframe class=\"videopreview\" width=\"420\" height=\"370\" src=\"${src}\"></iframe>`;\n            $('#videopreview').html(html).dialog('open').dialog(\"moveToTop\").focus();\n        },\n\n        initVideoTrainingPreview() {\n            $('.show-training-video').on('click', (e) => {\n                e.preventDefault();\n                const videoId = $(e.currentTarget).data('videoid');\n                this.videosShowVideoPreview(videoId);\n            });\n        },\n\n        videosShowVideoPreviewByUser(userId, timing) {\n            const src = `videopreview.php?id=${this.cmid}&userid=${userId}&timing=${timing}&width=400&height=300`;\n            const html = `<iframe class=\"videopreview\" width=\"420\" height=\"370\" src=\"${src}\"></iframe>`;\n            $('#videopreview').html(html).dialog('open').dialog(\"moveToTop\").focus();\n        },\n\n        videosVideoPreviewNotice() {\n            let html = `\n                <p class=\"popup-video-preview-heading\">${M.str.mod_videoassessment.donotclickhere}</p>\n                <div class=\"popup-video-preview\">\n                    ${M.str.mod_videoassessment.clickonthe}\n                    <span class=\"button-firstassess-popup\">${M.str.mod_videoassessment.firstassess}</span>\n                    ${M.str.mod_videoassessment.or}\n                    <span class=\"button-assessagain-popup\">${M.str.mod_videoassessment.assessagain}</span>\n                </div>\n            `;\n            $('#videopreviewnotice').html(html).dialog('open').dialog(\"moveToTop\").focus();\n        },\n\n        videosShowAssocPanel(videoId) {\n            this.videoid = videoId;\n            this.videosAssocPanelRefresh();\n            $('#id_videoid').val(this.videoid);\n            $('#assocpanel').dialog('open').dialog(\"moveToTop\").focus();\n        },\n\n        videosAssocPanelRefresh() {\n            let filter = $('#studentfilter').val() || 'unassociated';\n            let html = `\n                <div>${M.str.videoassessment.liststudents}\n                    <select id=\"studentfilter\">\n                        <option value=\"unassociated\">${M.str.videoassessment.unassociated}</option>\n                        <option value=\"associated\">${M.str.videoassessment.associated}</option>\n                        <option value=\"all\">${M.str.moodle.all}</option>\n                    </select>\n                </div>\n                <div>\n                    ${M.str.videoassessment.beforeafter}:\n                    <input type=\"radio\" name=\"timing\" id=\"timingbefore\" checked=\"checked\">\n                    <label for=\"timingbefore\">${M.str.videoassessment.before}</label>\n                    <input type=\"radio\" name=\"timing\" id=\"timingafter\">\n                    <label for=\"timingafter\">${M.str.videoassessment.after}</label>\n                </div>\n            `;\n\n            for (const [i, user] of Object.entries(this.users)) {\n                if (this.shouldShowUser(filter, user)) {\n                    const checked = user.assocvideos.includes(this.videoid) ? 'checked' : '';\n                    html += `<div class=\"videoassoc-studentlist\">\n                        <label><input type=\"checkbox\" class=\"assocuser\" value=\"${i}\" ${checked}/> ${user.fullname}</label>\n                    </div>`;\n                }\n            }\n\n            html += `<button id=\"saveAssocBtn\">${M.str.videoassessment.saveassociations}</button>`;\n            $('#assocpanel').html(html);\n\n            $('#studentfilter').val(filter).on('change', () => this.videosAssocPanelRefresh());\n            $('#timingbefore').on('click', () => this.setTiming('before'));\n            $('#timingafter').on('click', () => this.setTiming('after'));\n            $('#saveAssocBtn').on('click', () => this.videosSaveAssociations());\n        },\n\n        shouldShowUser(filter, user) {\n            return filter === 'all' ||\n                (filter === 'unassociated' && !user.assocvideos.length) ||\n                (filter === 'associated' && user.assocvideos.length);\n        },\n\n        videosSaveAssociations() {\n            const assocdata = [];\n            $('.assocuser').each(function () {\n                assocdata.push([$(this).val(), $(this).is(':checked')]);\n            });\n            $('#id_assocdata').val(JSON.stringify(assocdata));\n            $('#mform1').submit();\n        },\n\n        setTiming(value) {\n            $('#id_timing').val(value);\n            log.debug(`timing set ${value}`);\n        },\n\n        reportCombineRubrics() {\n            $('.report-rubrics').each((index, node) => {\n                const $node = $(node); // Convert to jQuery object\n\n                ['before', 'after'].forEach((timing) => {\n                    const $teacherRubric = $node.find(`#rubrics-${timing}teacher`);\n                    const $selfRubric = $node.find(`#rubrics-${timing}self`);\n                    const $peerRubric = $node.find(`#rubrics-${timing}peer`);\n                    const $classRubric = $node.find(`#rubrics-${timing}class`);\n\n                    if (!$teacherRubric.length) { return; }\n\n                    $teacherRubric.find('.remark').addClass('rubrictext-teacher');\n                    $node.find(`#heading-${timing}teacher`).hide();\n\n                    let countClass = $classRubric.find('.criterion').length\n                        ? $node.find('.finalgrade .rubrictext-class').length\n                        : 0;\n                    let countPeer = $peerRubric.find('.criterion').length\n                        ? $node.find('.finalgrade .rubrictext-peer').length\n                        : 0;\n                    let countTeacher = $teacherRubric.find('.criterion').length\n                        ? $node.find('.finalgrade .rubrictext-teacher').length\n                        : 0;\n\n                    if ($selfRubric.find('.criterion').length) {\n                        this.manageReportRubric(\n                            $node,\n                            'self',\n                            ['peer', 'teacher', 'class'],\n                            timing,\n                            countPeer,\n                            countClass,\n                            countTeacher\n                        );\n                    }\n\n                    if (!$selfRubric.find('.remark .rubrictext-peer').length && $peerRubric.find('.criterion').length) {\n                        if ($peerRubric.find('.criteria').length > 1) {\n                            this.manageReportSameRubric($node, 'peer', timing, countPeer, countClass, countTeacher);\n                        }\n                        this.manageReportRubric($node, 'peer', ['teacher', 'class'], timing, countPeer, countClass, countTeacher);\n                    }\n\n                    if (!$selfRubric.find('.remark .rubrictext-class').length &&\n                        !$peerRubric.find('.remark .rubrictext-class').length &&\n                        !$teacherRubric.find('.remark .rubrictext-class').length &&\n                        $classRubric.find('.criterion').length) {\n                        if ($classRubric.find('.criteria').length > 1) {\n                            this.manageReportSameRubric($node, 'class', timing, countPeer, countClass, countTeacher);\n                        }\n                    }\n\n                    ['self', 'peer', 'teacher', 'class'].forEach((gradertype) => {\n                        $node.find(`#rubrics-${timing}${gradertype} .criterion`).each((_, crit) => {\n                            $(crit).find('.level').each((_, level) => {\n                                const $level = $(level);\n                                if ($level.hasClass('checked')) {\n                                    this.setStyleGradeCell($level, $(crit), gradertype, countPeer, countClass, countTeacher);\n                                }\n                            });\n                        });\n                    });\n                });\n            });\n        },\n\n        initPrint() {\n            window.print();\n        },\n\n        initPublishVideos() {\n            this.initCheckAll(\"#all-video-check\", \".video-check\");\n        },\n\n        initDeleteVideos() {\n            this.initCheckAll(\"#all-video-check\", \".video-check\");\n\n            $('#id_submitbutton').on('click', (e) => {\n                const count = $(\".video-check:checked\").length;\n\n                if (count === 0) {\n                    alert(M.str.mod_videoassessment.errorcheckvideostodelete);\n                    e.preventDefault();\n                    return;\n                }\n\n                const deleteMessage = M.str.videoassessment.confirmdeletevideos.replace('{$a}', count);\n                if (!confirm(deleteMessage)) {\n                    e.preventDefault();\n                }\n            });\n        },\n\n        initCheckAll(allSelector, checkBoxesSelector) {\n            $(allSelector).on('click', function () {\n                $(checkBoxesSelector).prop('checked', $(this).is(':checked'));\n            });\n        },\n\n\n        manageGradesInit() {\n            $('.deletegrade').on('click', (e) => {\n                if (!confirm(M.str.mod_videoassessment.confirmdeletegrade)) {\n                    e.preventDefault();\n                }\n            });\n        },\n\n        manageReportRubric($node, targetGrade, graderTypes, timing, countPeer, countClass, countTeacher) {\n            graderTypes.forEach((graderType) => {\n                $node.find(`#rubrics-${timing}${graderType} .criterion`).each((_, crit) => {\n                    const $crit = $(crit);\n                    const critName = $crit.find('.description').html();\n                    const rowIndex = $crit.parent().children().index($crit);\n                    const levelName = $crit.find('.checked .definition').html();\n                    const colIndex = $crit.find('.checked').parent().children().index($crit.find('.checked'));\n                    const remark = $crit.find('.remark').html();\n\n                    let critFound = false;\n                    $node.find(`#rubrics-${timing}${targetGrade} .criterion`).each((index, tcrit) => {\n                        const $tcrit = $(tcrit);\n                        if (critFound) { return; }\n\n                        if ($tcrit.find('.description').html() === critName && index === rowIndex) {\n                            critFound = true;\n                            let levelFound = false;\n                            $tcrit.find('.level').each((index, level) => {\n                                const $level = $(level);\n                                if (levelFound) { return; }\n\n                                if ($level.find('.definition').html() === levelName && index === colIndex) {\n                                    levelFound = true;\n                                    this.fillGradeCell($level, graderType, countPeer, countClass, countTeacher);\n                                }\n                                $level.css('width', '40px');\n                            });\n\n                            $tcrit.find('.remark').addClass(`rubrictext-${targetGrade}`);\n                            $tcrit.find('.remark').append(`<div class=\"rubrictext-${graderType}\">${remark}</div>`);\n                            $crit.hide().addClass('hidden-information');\n                            const height = $tcrit.find('.remark').outerHeight();\n                            $tcrit.find('.checked').outerHeight(height);\n                        }\n                    });\n                });\n\n                const criterionCount = $node.find(`#rubrics-${timing}${graderType} .criterion`).length;\n                const hiddenCriterionCount = $node.find(`#rubrics-${timing}${graderType} .hidden-information`).length;\n                const $comment = $node.find(`#rubrics-${timing}${graderType} .comment`);\n\n                if (`rubrics-beforeclass` !== `rubrics-${timing}${graderType}`) {\n                    if (!$comment.length && criterionCount <= hiddenCriterionCount) {\n                        $node.find(`#rubrics-${timing}${graderType}`).hide();\n                    }\n\n                    if ($comment.length && criterionCount <= hiddenCriterionCount) {\n                        if ($node.find(`#rubrics-${timing}${graderType} .pagebreak`).length) {\n                            $node.find(`#rubrics-${timing}${graderType} .pagebreak`).remove();\n                        }\n                    }\n                } else {\n                    if (criterionCount <= hiddenCriterionCount) {\n                        $node.find('#rubrics-beforeclass .pagebreak').remove();\n                        $node.find('#rubrics-beforeclass').prev().prev().find('.pagebreak').remove();\n                    }\n                }\n                $node.find('#rubrics-beforetraining .pagebreak').remove();\n                $node.find(`#heading-${timing}${graderType}`).hide();\n            });\n        },\n\n        manageReportSameRubric($node, graderType, timing, countPeer, countClass, countTeacher) {\n            const $criterias = $node.find(`#rubrics-${timing}${graderType} .criteria`).slice(1);\n\n            $criterias.each((_, criteria) => {\n                const $criteria = $(criteria);\n                $criteria.find('.criterion').each((_, crit) => {\n                    const $crit = $(crit);\n                    const critName = $crit.find('.description').html();\n                    const rowIndex = $crit.parent().children().index($crit);\n                    const levelName = $crit.find('.checked .definition').html();\n                    const colIndex = $crit.find('.checked').parent().children().index($crit.find('.checked'));\n                    const remark = $crit.find('.remark').html();\n\n                    let critFound = false;\n                    $node.find(`#rubrics-${timing}${graderType} .criteria:first .criterion`).each((index, tcrit) => {\n                        const $tcrit = $(tcrit);\n                        if (critFound) { return; }\n\n                        if ($tcrit.find('.description').html() === critName && index === rowIndex) {\n                            critFound = true;\n                            let levelFound = false;\n                            $tcrit.find('.level').each((index, level) => {\n                                const $level = $(level);\n                                if (levelFound) { return; }\n\n                                if ($level.find('.definition').html() === levelName && index === colIndex) {\n                                    levelFound = true;\n                                    this.fillGradeCell($level, graderType, countPeer, countClass, countTeacher);\n                                }\n                                $level.css('width', '40px');\n                            });\n\n                            $tcrit.find('.remark').addClass(`rubrictext-${graderType}`);\n                            $tcrit.find('.remark').append(`<div class=\"rubrictext-${graderType}\">${remark}</div>`);\n                            $crit.hide().addClass('hidden-information');\n                            const height = $tcrit.find('.remark').outerHeight();\n                            $tcrit.find('.checked').outerHeight(height);\n                        }\n                    });\n                });\n\n                const criterionCount = $node.find(`#rubrics-${timing}${graderType} .criterion`).length;\n                const hiddenCriterionCount = $node.find(`#rubrics-${timing}${graderType} .hidden-information`).length;\n                const $comment = $node.find(`#rubrics-${timing}${graderType} .comment`);\n\n                if (`rubrics-beforeclass` !== `rubrics-${timing}${graderType}`) {\n                    if (!$comment.length && criterionCount <= hiddenCriterionCount) {\n                        $node.find(`#rubrics-${timing}${graderType}`).hide();\n                    }\n\n                    if ($comment.length && criterionCount <= hiddenCriterionCount) {\n                        if ($node.find(`#rubrics-${timing}${graderType} .pagebreak`).length) {\n                            $node.find(`#rubrics-${timing}${graderType} .pagebreak`).remove();\n                        }\n                    }\n                } else {\n                    if (criterionCount <= hiddenCriterionCount) {\n                        $node.find('#rubrics-beforeclass .pagebreak').remove();\n                        $node.find('#rubrics-beforeclass').prev().prev().find('.pagebreak').remove();\n                    }\n                }\n                $node.find('#rubrics-beforetraining .pagebreak').remove();\n                $node.find(`#heading-${timing}${graderType}`).hide();\n                $criteria.hide();\n            });\n        },\n\n        setStyleGradeCell($level, $tcrit, graderType, countPeer, countClass, countTeacher) {\n            $level.css({ 'border': 'none', 'border-left': '1px solid #ddd', 'border-right': '1px solid #ddd' });\n            $tcrit.find('.checked').css('background', 'none');\n            this.fillGradeCell($level, graderType, countPeer, countClass, countTeacher);\n        },\n\n        fillGradeCell($level, graderType, countPeer, countClass, countTeacher) {\n            if (graderType === 'self') {\n                $level.find('.level-wrapper').append(\n                    `<span class=\"inferiorlevelmarker rubrictext-${graderType}\">` +\n                    `${M.str.videoassessment[graderType]}</span><br>`\n                );\n            } else if (graderType === 'teacher' && !$level.find('.level-wrapper .rubrictext-teacher').length) {\n                $level.find('.level-wrapper').append(\n                    `<span class=\"inferiorlevelmarker rubrictext-${graderType}\">` +\n                    `${M.str.videoassessment[graderType]} (${countTeacher})</span><br>`\n                );\n            } else if (graderType === 'peer' && !$level.find('.level-wrapper .rubrictext-peer').length) {\n                $level.find('.level-wrapper').append(\n                    `<span class=\"inferiorlevelmarker rubrictext-${graderType}\">` +\n                    `${M.str.videoassessment[graderType]} (${countPeer})</span><br>`\n                );\n            } else if (graderType === 'class' && !$level.find('.level-wrapper .rubrictext-class').length) {\n                $level.find('.level-wrapper').append(\n                    `<span class=\"inferiorlevelmarker rubrictext-${graderType}\">` +\n                    `${M.str.videoassessment[graderType]} (${countClass})</span><br>`\n                );\n            }\n        }\n    };\n\n    return videoassessment;\n\n});"],"names":["define","$","log","mainInit","cmid","initVideoPreview","videosInit","users","assocs","dialog","autoOpen","width","height","draggable","handle","on","e","confirm","M","str","videoassessment","reallydeletevideo","preventDefault","peersInit","peersConfirmRandom","reallyresetallpeers","assessInit","initVideoLinks","videoId","target","data","parent","debug","modal","close","html","videosUpdateAssocCell","$div","user","this","fullname","videosShowVideoPreview","src","focus","initVideoTrainingPreview","currentTarget","videosShowVideoPreviewByUser","userId","timing","videosVideoPreviewNotice","mod_videoassessment","donotclickhere","clickonthe","firstassess","or","assessagain","videosShowAssocPanel","videoid","videosAssocPanelRefresh","val","filter","liststudents","unassociated","associated","moodle","all","beforeafter","before","after","i","Object","entries","shouldShowUser","checked","assocvideos","includes","saveassociations","setTiming","videosSaveAssociations","length","assocdata","each","push","is","JSON","stringify","submit","value","reportCombineRubrics","index","node","$node","forEach","$teacherRubric","find","$selfRubric","$peerRubric","$classRubric","addClass","hide","countClass","countPeer","countTeacher","manageReportRubric","manageReportSameRubric","gradertype","_","crit","level","$level","hasClass","setStyleGradeCell","initPrint","window","print","initPublishVideos","initCheckAll","initDeleteVideos","count","alert","errorcheckvideostodelete","deleteMessage","confirmdeletevideos","replace","allSelector","checkBoxesSelector","prop","manageGradesInit","confirmdeletegrade","targetGrade","graderTypes","graderType","$crit","critName","rowIndex","children","levelName","colIndex","remark","critFound","tcrit","$tcrit","levelFound","fillGradeCell","css","append","outerHeight","criterionCount","hiddenCriterionCount","$comment","remove","prev","slice","criteria","$criteria"],"mappings":"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"}