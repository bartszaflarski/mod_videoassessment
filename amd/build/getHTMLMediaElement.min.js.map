{"version":3,"file":"getHTMLMediaElement.min.js","sources":["../src/getHTMLMediaElement.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Video assessment\n *\n * @package\n * @module     mod_videoassessment/getHTMLMediaElement\n * @copyright  2024 Don Hinkleman (hinkelman@mac.com)\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine([], function () {\n    /**\n    * Creates a media element with controls.\n    */\n    function myMediaElement() {\n        this.value = \"Media Element\";\n    }\n    myMediaElement.prototype.getHTMLMediaElement = function (mediaElement, config) {\n        config = config || {};\n        const nodeName = mediaElement.nodeName && mediaElement.nodeName.toLowerCase();\n        if (!nodeName || (nodeName !== 'audio' && nodeName !== 'video')) {\n            if (!mediaElement.getVideoTracks().length) {\n                return this.getAudioElement(mediaElement, config);\n            }\n\n            var mediaStream = mediaElement;\n            mediaElement = document.createElement(mediaStream.getVideoTracks().length ? 'video' : 'audio');\n\n            if ('srcObject' in mediaElement) {\n                mediaElement.srcObject = mediaStream;\n            } else {\n                const isMoz = !!navigator.mozGetUserMedia;\n                const streamURL = isMoz\n                    ? mediaStream\n                    : window.webkitURL.createObjectURL(mediaStream);\n                mediaElement[isMoz ? 'mozSrcObject' : 'src'] = streamURL;\n            }\n        }\n\n        if (mediaElement.nodeName && mediaElement.nodeName.toLowerCase() == 'audio') {\n            return this.getAudioElement(mediaElement, config);\n        }\n\n        mediaElement.controls = false;\n\n        var buttons = config.buttons || ['mute-audio', 'mute-video', 'full-screen', 'volume-slider', 'stop'];\n        buttons.has = function (element) {\n            return buttons.indexOf(element) !== -1;\n        };\n\n        config.toggle = config.toggle || [];\n        config.toggle.has = function (element) {\n            return config.toggle.indexOf(element) !== -1;\n        };\n\n        var mediaElementContainer = document.createElement('div');\n        mediaElementContainer.className = 'media-container';\n\n        var mediaControls = document.createElement('div');\n        mediaControls.className = 'media-controls';\n        mediaElementContainer.appendChild(mediaControls);\n\n        if (buttons.has('mute-audio')) {\n            var muteAudio = document.createElement('div');\n            muteAudio.className = 'control ' + (config.toggle.has('mute-audio') ? 'unmute-audio selected' : 'mute-audio');\n            mediaControls.appendChild(muteAudio);\n\n            muteAudio.onclick = function () {\n                if (muteAudio.className.indexOf('unmute-audio') != -1) {\n                    muteAudio.className = muteAudio.className.replace(\n                        'unmute-audio selected',\n                        'mute-audio'\n                    );\n                    mediaElement.muted = false;\n                    mediaElement.volume = 1;\n                    if (config.onUnMuted) { config.onUnMuted('audio'); }\n                } else {\n                    muteAudio.className = muteAudio.className.replace(\n                        'mute-audio',\n                        'unmute-audio selected'\n                    );\n                    mediaElement.muted = true;\n                    mediaElement.volume = 0;\n                    if (config.onMuted) { config.onMuted('audio'); }\n                }\n            };\n        }\n\n        if (buttons.has('mute-video')) {\n            var muteVideo = document.createElement('div');\n            muteVideo.className = 'control ' + (config.toggle.has('mute-video') ? 'unmute-video selected' : 'mute-video');\n            mediaControls.appendChild(muteVideo);\n\n            muteVideo.onclick = function () {\n                if (muteVideo.className.indexOf('unmute-video') != -1) {\n                    muteVideo.className = muteVideo.className.replace('unmute-video selected', 'mute-video');\n                    mediaElement.muted = false;\n                    mediaElement.volume = 1;\n                    mediaElement.play();\n                    if (config.onUnMuted) { config.onUnMuted('video'); }\n                } else {\n                    muteVideo.className = muteVideo.className.replace('mute-video', 'unmute-video selected');\n                    mediaElement.muted = true;\n                    mediaElement.volume = 0;\n                    mediaElement.pause();\n                    if (config.onMuted) { config.onMuted('video'); }\n                }\n            };\n        }\n\n        if (buttons.has('take-snapshot')) {\n            var takeSnapshot = document.createElement('div');\n            takeSnapshot.className = 'control take-snapshot';\n            mediaControls.appendChild(takeSnapshot);\n\n            takeSnapshot.onclick = function () {\n                if (config.onTakeSnapshot) { config.onTakeSnapshot(); }\n            };\n        }\n\n        if (buttons.has('stop')) {\n            var stop = document.createElement('div');\n            stop.className = 'control stop';\n            mediaControls.appendChild(stop);\n\n            stop.onclick = function () {\n                mediaElementContainer.style.opacity = 0;\n                setTimeout(function () {\n                    if (mediaElementContainer.parentNode) {\n                        mediaElementContainer.parentNode.removeChild(mediaElementContainer);\n                    }\n                }, 800);\n                if (config.onStopped) { config.onStopped(); }\n            };\n        }\n\n        var volumeControl = document.createElement('div');\n        volumeControl.className = 'volume-control';\n\n        if (buttons.has('record-audio')) {\n            var recordAudio = document.createElement('div');\n            var recAudSelc = 'stop-recording-audio selected';\n            recordAudio.className = 'control ' + (config.toggle.has('record-audio') ? recAudSelc : 'record-audio');\n            volumeControl.appendChild(recordAudio);\n\n            recordAudio.onclick = function () {\n                if (recordAudio.className.indexOf('stop-recording-audio') != -1) {\n                    recordAudio.className = recordAudio.className.replace(recAudSelc, 'record-audio');\n                    if (config.onRecordingStopped) { config.onRecordingStopped('audio'); }\n                } else {\n                    recordAudio.className = recordAudio.className.replace('record-audio', recAudSelc);\n                    if (config.onRecordingStarted) { config.onRecordingStarted('audio'); }\n                }\n            };\n        }\n\n        if (buttons.has('record-video')) {\n            var recordVideo = document.createElement('div');\n            var recVidSelc = 'stop-recording-video selected';\n            recordVideo.className = 'control ' + (config.toggle.has('record-video') ? recVidSelc : 'record-video');\n            volumeControl.appendChild(recordVideo);\n\n            recordVideo.onclick = function () {\n                if (recordVideo.className.indexOf('stop-recording-video') != -1) {\n                    recordVideo.className = recordVideo.className.replace(recVidSelc, 'record-video');\n                    if (config.onRecordingStopped) { config.onRecordingStopped('video'); }\n                } else {\n                    recordVideo.className = recordVideo.className.replace('record-video', recVidSelc);\n                    if (config.onRecordingStarted) { config.onRecordingStarted('video'); }\n                }\n            };\n        }\n\n        if (buttons.has('volume-slider')) {\n            var volumeSlider = document.createElement('div');\n            volumeSlider.className = 'control volume-slider';\n            volumeControl.appendChild(volumeSlider);\n\n            var slider = document.createElement('input');\n            slider.type = 'range';\n            slider.min = 0;\n            slider.max = 100;\n            slider.value = 100;\n            slider.onchange = function () {\n                mediaElement.volume = '.' + slider.value.toString().substr(0, 1);\n            };\n            volumeSlider.appendChild(slider);\n        }\n\n        if (buttons.has('full-screen')) {\n            var zoom = document.createElement('div');\n            zoom.className = 'control ' + (config.toggle.has('zoom-in') ? 'zoom-out selected' : 'zoom-in');\n\n            if (!slider && !recordAudio && !recordVideo && zoom) {\n                mediaControls.insertBefore(zoom, mediaControls.firstChild);\n            } else { volumeControl.appendChild(zoom); }\n\n            zoom.onclick = function () {\n                if (zoom.className.indexOf('zoom-out') != -1) {\n                    zoom.className = zoom.className.replace('zoom-out selected', 'zoom-in');\n                    exitFullScreen();\n                } else {\n                    zoom.className = zoom.className.replace('zoom-in', 'zoom-out selected');\n                    launchFullscreen(mediaElementContainer);\n                }\n            };\n\n            /**\n             * Set full screen of media.\n             * @param {HTMLElement} element - Media container element\n             */\n            const launchFullscreen = function (element) {\n                if (element.requestFullscreen) {\n                    element.requestFullscreen();\n                } else if (element.mozRequestFullScreen) {\n                    element.mozRequestFullScreen();\n                } else if (element.webkitRequestFullscreen) {\n                    element.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n                }\n            };\n\n            /**\n             * Exit the full screen of media\n             */\n            const exitFullScreen = function () {\n                if (document.fullscreen) {\n                    document.cancelFullScreen();\n                }\n\n                if (document.mozFullScreen) {\n                    document.mozCancelFullScreen();\n                }\n\n                if (document.webkitIsFullScreen) {\n                    document.webkitCancelFullScreen();\n                }\n            };\n\n            /**\n             * Change screen state\n             * @param {Event} e - Fullscreen change event\n             */\n            const screenStateChange = function (e) {\n                if (e.srcElement != mediaElementContainer) { return; }\n\n                var isFullScreeMode = document.webkitIsFullScreen || document.mozFullScreen || document.fullscreen;\n\n                mediaElementContainer.style.width = (isFullScreeMode ? (window.innerWidth - 20) : config.width) + 'px';\n                mediaElementContainer.style.display = isFullScreeMode ? 'block' : 'inline-block';\n\n                if (config.height) {\n                    mediaBox.style.height = (isFullScreeMode ? (window.innerHeight - 20) : config.height) + 'px';\n                }\n\n                if (!isFullScreeMode && config.onZoomout) { config.onZoomout(); }\n                if (isFullScreeMode && config.onZoomin) { config.onZoomin(); }\n\n                if (!isFullScreeMode && zoom.className.indexOf('zoom-out') != -1) {\n                    zoom.className = zoom.className.replace('zoom-out selected', 'zoom-in');\n                    if (config.onZoomout) { config.onZoomout(); }\n                }\n                setTimeout(adjustControls, 1000);\n            };\n\n            document.addEventListener('fullscreenchange', screenStateChange, false);\n            document.addEventListener('mozfullscreenchange', screenStateChange, false);\n            document.addEventListener('webkitfullscreenchange', screenStateChange, false);\n        }\n\n        if (['volume-slider', 'full-screen', 'record-audio', 'record-video'].some(buttons.has)) {\n            mediaElementContainer.appendChild(volumeControl);\n        }\n\n        var mediaBox = document.createElement('div');\n        mediaBox.className = 'media-box';\n        mediaElementContainer.appendChild(mediaBox);\n\n        if (config.title) {\n            var h2 = document.createElement('h2');\n            h2.innerHTML = config.title;\n            h2.setAttribute('style', `\n                position:absolute;\n                color:white;\n                font-size:17px;\n                text-shadow:1px 1px black;\n                padding:0;\n                margin:0;\n                text-align:left;\n                margin-top:10px;\n                margin-left:10px;\n                display:block;\n                border:0;\n                line-height:1.5;\n                z-index:1;\n            `);\n            mediaBox.appendChild(h2);\n        }\n\n        mediaBox.appendChild(mediaElement);\n\n        if (!config.width) { config.width = (innerWidth / 2) - 50; }\n\n        mediaElementContainer.style.width = config.width + 'px';\n\n        if (config.height) {\n            mediaBox.style.height = config.height + 'px';\n        }\n\n        mediaBox.querySelector('video').style.maxHeight = innerHeight + 'px';\n\n        var times = 0;\n\n        /**\n         * Adjusts control position on the media container.\n         */\n        function adjustControls() {\n            mediaControls.style.marginLeft = (mediaElementContainer.clientWidth - mediaControls.clientWidth - 2) + 'px';\n\n            if (slider) {\n                slider.style.width = (mediaElementContainer.clientWidth / 3) + 'px';\n                volumeControl.style.marginLeft = (mediaElementContainer.clientWidth / 3 - 30) + 'px';\n\n                if (zoom) { zoom.style['border-top-right-radius'] = '5px'; }\n            } else {\n                volumeControl.style.marginLeft = (mediaElementContainer.clientWidth - volumeControl.clientWidth - 2) + 'px';\n            }\n\n            volumeControl.style.marginTop = (mediaElementContainer.clientHeight - volumeControl.clientHeight - 2) + 'px';\n\n            if (times < 10) {\n                times++;\n                setTimeout(adjustControls, 1000);\n            } else { times = 0; }\n        }\n\n        if (config.showOnMouseEnter || typeof config.showOnMouseEnter === 'undefined') {\n            mediaElementContainer.onmouseenter = mediaElementContainer.onmousedown = function () {\n                adjustControls();\n                mediaControls.style.opacity = 1;\n                volumeControl.style.opacity = 1;\n            };\n\n            mediaElementContainer.onmouseleave = function () {\n                mediaControls.style.opacity = 0;\n                volumeControl.style.opacity = 0;\n            };\n        } else {\n            setTimeout(function () {\n                adjustControls();\n                setTimeout(function () {\n                    mediaControls.style.opacity = 1;\n                    volumeControl.style.opacity = 1;\n                }, 300);\n            }, 700);\n        }\n\n        adjustControls();\n\n        mediaElementContainer.toggle = function (clasName) {\n            if (typeof clasName != 'string') {\n                for (var i = 0; i < clasName.length; i++) {\n                    mediaElementContainer.toggle(clasName[i]);\n                }\n                return;\n            }\n\n            if (clasName == 'mute-audio' && muteAudio) { muteAudio.onclick(); }\n            if (clasName == 'mute-video' && muteVideo) { muteVideo.onclick(); }\n\n            if (clasName == 'record-audio' && recordAudio) { recordAudio.onclick(); }\n            if (clasName == 'record-video' && recordVideo) { recordVideo.onclick(); }\n\n            if (clasName == 'stop' && stop) { stop.onclick(); }\n\n            return this;\n        };\n\n        mediaElementContainer.media = mediaElement;\n\n        return mediaElementContainer;\n    };\n\n    myMediaElement.prototype.getAudioElement = function (mediaElement, config) {\n        config = config || {};\n\n        const nodeName = mediaElement.nodeName && mediaElement.nodeName.toLowerCase();\n        if (!nodeName || (nodeName !== 'audio' && nodeName !== 'video')) {\n            var mediaStream = mediaElement;\n            mediaElement = document.createElement('audio');\n\n            if ('srcObject' in mediaElement) {\n                mediaElement.mediaElement = mediaStream;\n            } else {\n                const isMoz = !!navigator.mozGetUserMedia;\n                mediaElement[isMoz ? 'mozSrcObject' : 'src'] = isMoz ? mediaStream : window.webkitURL.createObjectURL(mediaStream);\n            }\n        }\n\n        config.toggle = config.toggle || [];\n        config.toggle.has = function (element) {\n            return config.toggle.indexOf(element) !== -1;\n        };\n\n        mediaElement.controls = false;\n        mediaElement.play();\n\n        var mediaElementContainer = document.createElement('div');\n        mediaElementContainer.className = 'media-container';\n\n        var mediaControls = document.createElement('div');\n        mediaControls.className = 'media-controls';\n        mediaElementContainer.appendChild(mediaControls);\n\n        var muteAudio = document.createElement('div');\n        muteAudio.className = 'control ' + (config.toggle.has('mute-audio') ? 'unmute-audio selected' : 'mute-audio');\n        mediaControls.appendChild(muteAudio);\n\n        muteAudio.style['border-top-left-radius'] = '5px';\n\n        muteAudio.onclick = function () {\n            if (muteAudio.className.indexOf('unmute-audio') != -1) {\n                muteAudio.className = muteAudio.className.replace('unmute-audio selected', 'mute-audio');\n                mediaElement.muted = false;\n                if (config.onUnMuted) { config.onUnMuted('audio'); }\n            } else {\n                muteAudio.className = muteAudio.className.replace('mute-audio', 'unmute-audio selected');\n                mediaElement.muted = true;\n                if (config.onMuted) { config.onMuted('audio'); }\n            }\n        };\n\n        if (!config.buttons || (config.buttons && config.buttons.indexOf('record-audio') != -1)) {\n            var recordAudio = document.createElement('div');\n            var recordingClass = 'stop-recording-audio selected';\n            recordAudio.className = 'control ' + (config.toggle.has('record-audio') ? recordingClass : 'record-audio');\n            mediaControls.appendChild(recordAudio);\n\n            recordAudio.onclick = function () {\n                if (recordAudio.className.indexOf('stop-recording-audio') != -1) {\n                    recordAudio.className = recordAudio.className.replace(recordingClass, 'record-audio');\n                    if (config.onRecordingStopped) { config.onRecordingStopped('audio'); }\n                } else {\n                    recordAudio.className = recordAudio.className.replace('record-audio', recordingClass);\n                    if (config.onRecordingStarted) { config.onRecordingStarted('audio'); }\n                }\n            };\n        }\n\n        var volumeSlider = document.createElement('div');\n        volumeSlider.className = 'control volume-slider';\n        volumeSlider.style.width = 'auto';\n        mediaControls.appendChild(volumeSlider);\n\n        var slider = document.createElement('input');\n        slider.style.marginTop = '11px';\n        slider.style.width = ' 200px';\n\n        if (config.buttons && config.buttons.indexOf('record-audio') == -1) {\n            slider.style.width = ' 241px';\n        }\n\n        slider.type = 'range';\n        slider.min = 0;\n        slider.max = 100;\n        slider.value = 100;\n        slider.onchange = function () {\n            mediaElement.volume = '.' + slider.value.toString().substr(0, 1);\n        };\n        volumeSlider.appendChild(slider);\n\n        var stop = document.createElement('div');\n        stop.className = 'control stop';\n        mediaControls.appendChild(stop);\n\n        stop.onclick = function () {\n            mediaElementContainer.style.opacity = 0;\n            setTimeout(function () {\n                if (mediaElementContainer.parentNode) {\n                    mediaElementContainer.parentNode.removeChild(mediaElementContainer);\n                }\n            }, 800);\n            if (config.onStopped) { config.onStopped(); }\n        };\n\n        stop.style['border-top-right-radius'] = '5px';\n        stop.style['border-bottom-right-radius'] = '5px';\n\n        var mediaBox = document.createElement('div');\n        mediaBox.className = 'media-box';\n        mediaElementContainer.appendChild(mediaBox);\n\n        var h2 = document.createElement('h2');\n        h2.innerHTML = config.title || 'Audio Element';\n        h2.setAttribute('style', `\n            position:absolute;\n            color:rgb(160, 160, 160);\n            font-size: 20px;\n            text-shadow: 1px 1px rgb(255, 255, 255);\n            padding:0;\n            margin:0;\n        `);\n        mediaBox.appendChild(h2);\n\n        mediaBox.appendChild(mediaElement);\n\n        mediaElementContainer.style.width = '329px';\n        mediaBox.style.height = '90px';\n\n        h2.style.width = mediaElementContainer.style.width;\n        h2.style.height = '50px';\n        h2.style.overflow = 'hidden';\n\n        var times = 0;\n\n        /**\n         * Adjusts control position on the media container.\n         */\n        function adjustControls() {\n            mediaControls.style.marginLeft = (mediaElementContainer.clientWidth - mediaControls.clientWidth - 7) + 'px';\n            mediaControls.style.marginTop = (mediaElementContainer.clientHeight - mediaControls.clientHeight - 6) + 'px';\n            if (times < 10) {\n                times++;\n                setTimeout(adjustControls, 1000);\n            } else { times = 0; }\n        }\n\n        if (config.showOnMouseEnter || typeof config.showOnMouseEnter === 'undefined') {\n            mediaElementContainer.onmouseenter = mediaElementContainer.onmousedown = function () {\n                adjustControls();\n                mediaControls.style.opacity = 1;\n            };\n\n            mediaElementContainer.onmouseleave = function () {\n                mediaControls.style.opacity = 0;\n            };\n        } else {\n            setTimeout(function () {\n                adjustControls();\n                setTimeout(function () {\n                    mediaControls.style.opacity = 1;\n                }, 300);\n            }, 700);\n        }\n\n        adjustControls();\n\n        mediaElementContainer.toggle = function (clasName) {\n            if (typeof clasName != 'string') {\n                for (var i = 0; i < clasName.length; i++) {\n                    mediaElementContainer.toggle(clasName[i]);\n                }\n                return;\n            }\n\n            if (clasName == 'mute-audio' && muteAudio) { muteAudio.onclick(); }\n            if (clasName == 'record-audio' && recordAudio) { recordAudio.onclick(); }\n            if (clasName == 'stop' && stop) { stop.onclick(); }\n\n            return this;\n        };\n\n        mediaElementContainer.media = mediaElement;\n\n        return mediaElementContainer;\n    };\n\n    return myMediaElement;\n});\n\n"],"names":["define","myMediaElement","value","prototype","getHTMLMediaElement","mediaElement","config","nodeName","toLowerCase","getVideoTracks","length","this","getAudioElement","mediaStream","document","createElement","srcObject","isMoz","navigator","mozGetUserMedia","streamURL","window","webkitURL","createObjectURL","controls","buttons","has","element","indexOf","toggle","mediaElementContainer","className","mediaControls","appendChild","muteAudio","onclick","replace","muted","volume","onUnMuted","onMuted","muteVideo","play","pause","takeSnapshot","onTakeSnapshot","stop","style","opacity","setTimeout","parentNode","removeChild","onStopped","volumeControl","recordAudio","recAudSelc","onRecordingStopped","onRecordingStarted","recordVideo","recVidSelc","volumeSlider","slider","type","min","max","onchange","toString","substr","zoom","insertBefore","firstChild","exitFullScreen","launchFullscreen","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT","fullscreen","cancelFullScreen","mozFullScreen","mozCancelFullScreen","webkitIsFullScreen","webkitCancelFullScreen","screenStateChange","e","srcElement","isFullScreeMode","width","innerWidth","display","height","mediaBox","innerHeight","onZoomout","onZoomin","adjustControls","addEventListener","some","title","h2","innerHTML","setAttribute","querySelector","maxHeight","times","marginLeft","clientWidth","marginTop","clientHeight","showOnMouseEnter","onmouseenter","onmousedown","onmouseleave","clasName","i","media","recordingClass","overflow"],"mappings":"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"}